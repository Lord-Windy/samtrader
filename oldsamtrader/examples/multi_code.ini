; samtrader multi-code portfolio backtest example
;
; Uses 'codes' instead of 'code' to backtest multiple instruments
; simultaneously with a shared portfolio. Each code is evaluated
; independently against the same strategy rules.

[database]
conninfo = host=localhost dbname=marketdata user=trader password=secret

[backtest]
initial_capital = 100000.0
commission_per_trade = 9.95
commission_pct = 0.0
slippage_pct = 0.001
allow_shorting = false
risk_free_rate = 0.05
start_date = 2020-01-01
end_date = 2024-12-31

; Multiple codes: comma-separated list of ASX bank stocks
codes = CBA, BHP, WBC, NAB
exchange = ASX

[strategy]
name = Multi-Code SMA Crossover
description = SMA crossover across a portfolio of ASX stocks

entry_long = CROSS_ABOVE(SMA(20), SMA(50))
exit_long = CROSS_BELOW(SMA(20), SMA(50))

; Allocate 25% of portfolio per position
position_size = 0.25

; One position per code (4 codes = 4 max)
max_positions = 4

; Risk management
stop_loss = 8.0
take_profit = 0.0

[report]
; template_path = /path/to/custom_template.typ
